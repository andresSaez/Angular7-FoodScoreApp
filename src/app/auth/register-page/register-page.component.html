<form action="#" id="form-register" class="mt-4" method="POST" role="form" (ngSubmit)="addUser()" #registerForm="ngForm" novalidate>
  <legend>Create an account</legend>

  <div class="form-group">
    <label for="nombre">Name:</label>
    <input type="text" class="form-control" id="name" name="nameUser" placeholder="Name"
      [(ngModel)]="newUser.name" required #nameModel="ngModel" [ngClass]="validClasses(nameModel, 'is-valid', 'is-invalid')">
    <div *ngIf="nameModel.touched && nameModel.invalid"
      class="alert alert-danger">
      Name is required and can only contain letters and spaces.
    </div>
  </div>
  <div class="form-group">
    <label for="correo">Email:</label>
    <input type="email" class="form-control" id="email" name="email" placeholder="Email"
       [(ngModel)]="newUser.email" required #emailModel="ngModel" [ngClass]="validClasses(emailModel, 'is-valid', 'is-invalid')">
    <div *ngIf="emailModel.touched && emailModel.invalid"
       class="alert alert-danger">
       Email is required.
    </div>
  </div>
  <div class="form-group">
    <label for="correo">Repeat Email:</label>
    <input type="email" class="form-control" id="email2" name="email2" placeholder="Email"
      [(ngModel)]="email2" required #email2Model="ngModel" [ngClass]="validClasses(email2Model, 'is-valid', 'is-invalid')">
    <div *ngIf="email2Model.touched && email2Model.invalid"
      class="alert alert-danger">
      Email is required.
    </div>
  </div>
  <div class="form-group">
    <label for="password">Password:</label>
    <input type="password" class="form-control" id="password" name="password" placeholder="Password"
      [(ngModel)]="newUser.password" required #passwordModel="ngModel" [ngClass]="validClasses(passwordModel, 'is-valid', 'is-invalid')">
    <div *ngIf="passwordModel.touched && passwordModel.invalid"
       class="alert alert-danger">
       Password is required.
    </div>
  </div>
  <div class="form-group">
    <label for="image">Avatar image</label>
    <input type="file" class="form-control" id="avatar" name="avatar" #fileImage (change)="changeImage(fileImage)"
      [ngClass]="{'is-valid': fileImage.files.length,
      'is-invalid': !fileImage.files.length}">
    <div *ngIf="!fileImage.files.length"
      class="alert alert-danger">
        An image is required.
    </div>
  </div>
  <img [src]="newUser.avatar" alt="" id="imgPreview" class="img-thumbnail">
  <div class="row">
    <div class="form-group col-xs-12 col-sm-6">
      <label for="latitude">Latitude:</label>
      <input type="text" class="form-control" id="lat" name="lat" placeholder="Geolocalizing..." readonly
      [(ngModel)]="newUser.lat">
    </div>
    <div class="form-group col-xs-12 col-sm-6">
      <label for="longitude">Longitude:</label>
      <input type="text" class="form-control" id="lng" name="lng" placeholder="Geolocalizing..." readonly
      [(ngModel)]="newUser.lng">
    </div>
  </div>
  <div *ngIf="email2 != newUser.email"
    class="alert alert-danger">
    Emails must be equal
  </div>
  <a class="btn btn-secondary mr-2" href="" [routerLink]="['/auth/login']" role="button">Go back</a>
  <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid
  || !fileImage.files.length || (email2 != newUser.email)">Create account</button>
</form>
